<?xml version="1.0"?>
<root main_tree_to_execute="MainTree">
    <!-- ////////// -->
    <BehaviorTree ID="MainTree">
        <Sequence name="DeliveryFlow">
            <Condition ID="isSummoned"/>
            <Action ID="SetupDelivery" destination="" receiver=""/>
            <Sequence name="ExecuteDelivery">
                <Fallback name="Travel">
                    <Action ID="TravelToDestination" destination=""/>
                    <Action ID="ReturnHome"/>
                </Fallback>
                <Fallback name="SearchAndDeliver">
                    <RetryUntilSuccessful num_attempts="5">
                        <Sequence>
                            <Action ID="SearchPerson"/>
                            <Action ID="DeliverPackage" receiver=""/>
                            <Action ID="ReturnHome"/>
                        </Sequence>
                    </RetryUntilSuccessful>
                    <Action ID="ReturnHome"/>
                </Fallback>
            </Sequence>
        </Sequence>
    </BehaviorTree>
    <!-- ////////// -->
    <TreeNodesModel>
        <Action ID="AvoidObstacle"/>
        <Action ID="DeliverPackage">
            <input_port name="receiver"/>
        </Action>
        <Action ID="DetectObstacle"/>
        <Action ID="NotifyFailure">
            <input_port name="reason"/>
        </Action>
        <Action ID="ReplanPath"/>
        <Action ID="ReturnHome"/>
        <Action ID="SearchPerson"/>
        <Action ID="SetupDelivery">
            <inout_port name="destination">Waypoint's name</inout_port>
            <inout_port name="receiver">Receiver's full name</inout_port>
        </Action>
        <Condition ID="SystemError"/>
        <Action ID="TravelToDestination">
            <input_port name="destination"/>
        </Action>
        <Condition ID="isSummoned"/>
    </TreeNodesModel>
    <!-- ////////// -->
</root>
